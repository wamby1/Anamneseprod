@model Anamneseprod.Controllers.QuestionnaireViewModel


<form asp-action="Questionnaire" method="post" id="questionForm">
    <input type="hidden" asp-for="CodeId" />
    <input type="hidden" asp-for="CurrentPage" />
    <input type="hidden" asp-for="Answers" />
   
    

    @if (Model.Questions.Count > Model.CurrentPage)
    {
        <h2>@Model.Questions[Model.CurrentPage].Title</h2>

        @foreach (var answer in Model.Questions[Model.CurrentPage].Answers)
        {
            <div class="form-check">
                <input class="form-check-input answer-radio" type="radio" asp-for="SelectedAnswer" id="@answer.AnswerID" value="@answer.AnswerID">
                <label class="form-check-label" for="@answer.AnswerID">
                    @answer.Value
                </label>
            </div>
        }

        <div class="mt-3">
            @if (Model.CurrentPage > 0)
            {
                <a asp-action="Questionnaire" asp-route-codeId="@Model.CodeId" asp-route-currentPage="@(Model.CurrentPage - 1)" class="btn btn-secondary">Zurück</a>
              
            }
            
            <button type="submit" id="nextButton" class="btn btn-primary" disabled>Weiter</button>
        </div>
    }
    else
    {
        <p>Keine weiteren Fragen verfügbar.</p>
    }
</form>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var form = document.getElementById('questionForm');
    var radios = form.querySelectorAll('.answer-radio');
    var nextButton = document.getElementById('nextButton');

    radios.forEach(function(radio) {
        radio.addEventListener('change', function() {
            nextButton.disabled = false;
        });
    });
});
</script>